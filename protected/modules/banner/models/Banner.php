<?php/** * This is the model class for table "banner". * * The followings are the available columns in table 'banner': * @property string $id * @property string $banner_img * @property string $start_date * @property string $end_date * @property integer $isactive */class Banner extends CActiveRecord{    public static function model($className=__CLASS__)    {        return parent::model($className);    }    /**     * @return string the associated database table name     */    public function tableName()    {        return 'banner';    }    /**     * @return array validation rules for model attributes.     */    public function rules()    {        // NOTE: you should only define rules for those attributes that        // will receive user inputs.        return array(            array('isactive,priority', 'numerical', 'integerOnly'=>true),            array('pagename,banner_img,isactive','required'),            array('id, banner_img, isactive,priority', 'safe', 'on'=>'search'),        );    }    /**     * @return array relational rules.     */    public function relations()    {        // NOTE: you may need to adjust the relation name and the related        // class name for the relations automatically generated below.        return array(        );    }    /**     * @return array customized attribute labels (name=>label)     */    public function attributeLabels()    {        return array(            'id' => 'ID',            'banner_img' => 'Banner Img',            'pagename' => 'Page',            'priority'=>'Priority',            'isactive' => 'Isactive',        );    }    /**     * Retrieves a list of models based on the current search/filter conditions.     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.     */    public function search()    {        // Warning: Please modify the following code to remove attributes that        // should not be searched.        $criteria=new CDbCriteria;        $criteria->compare('id',$this->id,true);        $criteria->compare('banner_img',$this->banner_img,true);        $criteria->compare('pagename',$this->pagename,true);        $criteria->compare('priority',$this->priority,true);        $criteria->compare('isactive',$this->isactive);       /* if($_GET=='')            $criteria->order ='id DESC';*/        return new CActiveDataProvider($this, array(            'criteria'=>$criteria,        ));    }    public function fetchdesc($id)    {        $res=$this->findAllByPk($id);        return($res);    }    public function updatestatus($id)    {        $i=$id;        $tablename=$this->tableName();        $pk='id';        $attribute='isactive';        $command=  yii::app()->db->createCommand('call common2("'.$tablename.'","'.$attribute.'","'.$pk.'",'.$id.')');        $command->execute();    }    public function deletefun($id)    {        $this->deleteByPk($id);    }    public function updatedata($post)    {        $this->updateByPk($post['pk'], array($post['name']=>$post['value']));    }    public function fetchupdatedetails($id)    {        $res=$this->findByPk($id);        return $res;    }    public function updatedetails($id,$arr)    {        $res=$this->updateByPk($id,$arr);    }}